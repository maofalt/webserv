user       www www;  ## Default: nobody
worker_processes  5;  ## Default: 1
error_log  logs/error.log;
pid        logs/nginx.pid;
worker_rlimit_nofile 8192;
clientBodyLimit 1000;
clientHeaderLimit 1000;
maxConnections 100000;

#server {
#	worker_connections  4096;  ## Default: 1024
#}

include    conf/mime.types;
include    /etc/nginx/proxy.conf;
include    /etc/nginx/fastcgi.conf;
index    index.html index.htm index.php;
default_type application/octet-stream;
log_format   main '$remote_addr - $remote_user [$time_local]  $status ' '"$request" $body_bytes_sent "$http_referer" ' '"$http_user_agent" "$http_x_forwarded_for"';
access_log   logs/access.log  main;
sendfile     on;
tcp_nopush   on;
server_names_hash_bucket_size 128; # this seems to be required for some vhosts
server {
	listen       8000 8001 9000 5000;
	server_name  127.0.0.1;
	access_log   logs/domain1.access.log  main;
	root         html;
	location / {
		root         ./site2/;
		methods      GET;
		index        index.html;
	}
	location /wiki {
		return       http://wikipedia.org;
	}
	location /php {
		root         ./site2/php;
		methods      GET POST;
		cgi          /usr/bin/php-cgi;
	}
}
server { # simple load balancing
	listen          8001;
	server_name     big.server.com;
	access_log      logs/big.server.access.log main;
	location / {
		proxy_pass      http://big_server_com;
	}
}

